<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html [
  <!ENTITY % htmlDTD PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
    %htmlDTD;
  <!ENTITY % directionDTD SYSTEM "chrome://global/locale/global.dtd">
    %directionDTD;
  <!ENTITY % ubiquityaboutDTD SYSTEM "chrome://ubiquity/locale/aboutubiquity.dtd">
    %ubiquityaboutDTD;
  <!ENTITY % ubiquityinternalDTD SYSTEM "chrome://ubiquity/content/internal.dtd">
    %ubiquityinternalDTD;
]>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>&ubiquity.pagetitle.HackUbiquity;</title>

  <base href="chrome://ubiquity/content" />

  <link rel="icon" type="image/x-icon" id="favicon" href="chrome://ubiquity/skin/icons/favicon.ico" />
  <link rel="stylesheet" href="web-content.css" type="text/css" />

  <script type="text/javascript" src="resource://ubiquity/scripts/jquery.js"></script>
  <script type="application/javascript;version=1.8" src="chrome://ubiquity/content/header.js"></script>

  <script type="application/javascript;version=1.8" src="chrome://ubiquity/content/developer-news.js"></script>
  <script type="application/javascript;version=1.8" src="editor.js"></script>
  <script type="application/javascript" src="bespin-embedded.js"></script>
  <script type="application/javascript;version=1.8" src="resource://ubiquity/scripts/codemirror/js/codemirror.js"></script>

  <script type="text/javascript">
  <![CDATA[
    var file; 
    var lastModifiedTime = 0; 
    function initialize() {
      document.getElementById("feedTypeMenu").value = PrefCommands.type;
      document.getElementById("editor-div").innerHTML = PrefCommands.getCode();
    }
    function launch() { 
      file = Editor.launchEditor(document.getElementById('editor-div')._editor.getContent()); 
      if (file != null && file.exists()) { 
        lastModifiedTime = file.lastModifiedTime; 
        setTimeout(watchFile, 500) 
      } 
    } 
    function watchFile() { 
      if (file != null && file.exists()) { 
        time = file.lastModifiedTime; 
        if (time > lastModifiedTime) {
          document.getElementById('editor-div')._editor.setContent(Editor.readFile(file)); 
          PrefCommands.setCode(document.getElementById('editor-div')._editor.getContent()); 
          lastModifiedTime = time;
        }
        setTimeout(watchFile, 500);
      }
    }
    window.addEventListener("load",
                            function() {
                              initialize();
                              var editor = new BespinEditor();
                              editor.initUI('editor-div', window);
                            },
                            false
    );  
  ]]>
  </script>

</head>
<body dir="&locale.dir;">

<div class="head">&ubiquity.tagline.HackUbiquity;</div>

<div id="nav-container"></div>

<br clear="all" />

<div style="text-align:center;">
  <p>&ubiquity.pagetip.HackUbiquity;</p>
</div>

<br clear="all" />

<h1>&ubiquity.editor.CommandEditorHeader;</h1>
<p id="notification-bar" class="notification" style="display:none"></p>

<div class="col-three">
  <p>&ubiquity.editor.CommandEditorNewCommands;</p>
</div>

<div class="col-three">
  <p>&ubiquity.editor.CommandEditorReadAuthTutorial;</p>
  <p style="background-color: #F2E78B; padding:5px;">&ubiquity.editor.CommandEditorReadTheDocs;</p>
</div>

<div class="col-two">
  <p>&ubiquity.editor.CommandEditorGetInvolved;</p>
</div>

<div id="editor-actions">
  <br clear="all" />
  <div id="editor-log"></div>

  <div id="external-editor-pref">
    &ubiquity.editor.YourExternalEd;
    <input id="editorInputBox" type="file" size="20" style="cursor:pointer" onchange="Editor.onSave()" />
  </div>

  <br />

  <div id="feed-type-pref">&ubiquity.editor.EditorCommandType;
    <select id="feedTypeMenu" onchange="Editor.onFeedTypeChange()">
      <option value="commands">&ubiquity.editor.CmdTypeRegular;</option>
      <option value="locked-down-commands">&ubiquity.editor.CmdTypeLocked;</option>
    </select>
  </div>

  <div>
    <span class="feed-type-desc" id="commands">&ubiquity.editor.RegularCommandDesc;</span>
    <span class="feed-type-desc" id="locked-down-commands">&ubiquity.editor.LockedCommandDesc;</span>
  </div>

  <br clear="all" />

  <ul class="button-list">
    <li><a class="button" onclick="importTemplate();return false"><strong>&ubiquity.editor.ImportTemplate;</strong></a></li>
    <li><a class="button" onclick="launch();return false"><strong>&ubiquity.editor.LaunchExternalEd;</strong></a></li>
    <li><a class="button" onclick="paste();return false"><strong>&ubiquity.editor.ShareCommand;</strong></a></li>
    <li><a class="button" onclick="saveAs();return false"><strong>&ubiquity.editor.SaveToFile;</strong></a></li>
  </ul>

  <br clear="all" />

  <div id="editor-options">
  </div>
</div>

<div id="editor-div" style="height: 500px;">
</div>

<br clear="all" />

<div class="col-five">
  <h2>&ubiquity.editor.ShareYourCommands;</h2>
  <p>&ubiquity.editor.ShareCommandsParagraph1;</p>
  <p>&ubiquity.editor.ShareCommandsParagraph2;</p>

  <h2>&ubiquity.editor.DevelopingUbiquity;</h2>
  <p>&ubiquity.editor.DevelopingUbiquityParagraph1;</p>
  <p>&ubiquity.editor.DevelopingUbiquityParagraph2;</p>
  <p>&ubiquity.editor.DevelopingUbiquityParagraph3;</p>
  <p>&ubiquity.editor.DevelopingUbiquityParagraph4;</p>
</div>

<div class="col-four">
  <h2>&ubiquity.editor.LatestChangesFeedTitle;</h2>
  <div id="news"></div>
</div>

</body>
</html>
