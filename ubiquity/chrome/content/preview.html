<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
      xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="test.css" type="text/css">
  <link rel="stylesheet" href="preview.css" type="text/css">
</head>
<body>
<script type="text/javascript">
	document.addEventListener("click", function(event) {
		var target = event.target;
		if(target.nodeName != 'A' || !target.href)
			return;
		
		event.preventDefault();
		
		openUrl(target.href);
	}, true);
	
	function openUrl(url) {
		var windowManager = Components.classes["@mozilla.org/appshell/window-mediator;1"]
			.getService(Components.interfaces.nsIWindowMediator);
		var browserWindow = windowManager.getMostRecentWindow("navigator:browser");
		var browser = browserWindow.getBrowser();
		
		if(browser.mCurrentBrowser.currentURI.spec == "about:blank")
			browserWindow.loadURI(url, null, null, false);
		else
			browser.loadOneTab(url, null, null, null, false, false);
	}
</script>
<div id="preview"></div>
</body>
</html>
