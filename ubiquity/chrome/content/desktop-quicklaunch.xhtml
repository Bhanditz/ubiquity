<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html [
  <!ENTITY % htmlDTD PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
    %htmlDTD;
  <!ENTITY % directionDTD SYSTEM "chrome://global/locale/global.dtd">
    %directionDTD;
  <!ENTITY % ubiquitydevDTD SYSTEM "chrome://ubiquity/locale/devubiquity.dtd">
    %ubiquitydevDTD;
  <!ENTITY % ubiquityinternalDTD SYSTEM "chrome://ubiquity/content/internal.dtd">
    %ubiquityinternalDTD;
]>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title>&ubiquity.pagetitle.QuickLaunch;</title>
  
  <link rel="stylesheet" type="text/css" media="all" href="chrome://global/skin/netError.css" />
  <link rel="icon" type="image/png" id="favicon" href="chrome://global/skin/icons/information-16.png" />

  <script type="text/javascript" src="resource://ubiquity/scripts/jquery.js"></script>

  <script type="text/javascript">
  <![CDATA[

  Components.utils.import("resource://ubiquity/modules/localization_utils.js");

  var L = LocalizationUtils.propertySelector(
    "chrome://ubiquity/locale/devubiquity.properties");

  $(window).ready(
    function() {
      maybeShowButton();
    });

    function maybeShowButton() {
      var xulRuntime = Components.classes["@mozilla.org/xre/app-info;1"].
        getService(Components.interfaces.nsIXULRuntime);
      if (xulRuntime.OS == "Darwin") {
        showButton();
      } else {
        $("#button").text(L("ubiquity.quicklaunch.sorrymessage"));
        }
    }

    function showButton() {
    Components.utils.import("resource://ubiquity/modules/desktop.js");

      if (!Desktop.getGlobalHotkey()) {
        var btn = $('<input type="button" value="' + 
          L("ubiquity.quicklaunch.enabledefault")+ '" />');
        btn.click(install);
        $("#button").append(btn);
      } else {
        $("#button").text(L("ubiquity.quicklaunch.enablerunning"));
      }
    }

    function install() {
      Components.utils.import("resource://ubiquity/modules/desktop_quicklaunch.js");

      Desktop.registerGlobalHotkey({keycode: Desktop.KEYCODE_SPACE,modifiers: Desktop.MODIFIER_OPTION});
      QuickLaunch.installHotkeyListener();
      $("#button").text(L("ubiquity.quicklaunch.enableconfirm"));
    }

  $(window).error(
    function() {
    $("#button").text(L("ubiquity.quicklaunch.error"));
  });
  ]]>
</script>

</head>
<body dir="&locale.dir;">

<div id="errorPageContainer" style="background-image: url(chrome://global/skin/icons/information-64.png);">
  <div id="errorTitle"><h1>&ubiquity.quicklaunch.Header;</h1></div>

  <div id="errorLongContent">

    <div id="errorShortDesc">
      <p>&ubiquity.quicklaunch.ShortDesc;</p>
    </div>

    <div id="errorLongDesc">
      <p>&ubiquity.quicklaunch.LongDesc1;</p>
      <p>&ubiquity.quicklaunch.LongDesc2;</p>
      <div id="button"></div>
    </div>

  </div>
</div>

</body>
</html>
